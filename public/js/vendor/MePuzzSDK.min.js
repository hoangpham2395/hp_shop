!function(e){(function(){var i,o,n,t=["https://www.gstatic.com/firebasejs/5.3.0/firebase-app.js","https://www.gstatic.com/firebasejs/5.3.0/firebase-messaging.js"],s="/MePuzzWorker.js",r="266761263864",a=[],c=[],d="https://mepuzz.com/api/",u=navigator.platform,l=(document,navigator,screen,e),p=(l.encodeURIComponent,l.decodeURIComponent),m=function(){var e=navigator.language;if(e){var i=(e=e.toLowerCase()).split("-");if("zh"==i[0]){for(var o=0,n=C.TRADITIONAL_CHINESE_LANGUAGE_TAG;o<n.length;o++){var t=n[o];if(-1!==i.indexOf(t))return"zh-Hant"}for(var s=0,r=C.SIMPLIFIED_CHINESE_LANGUAGE_TAG;s<r.length;s++){var a=r[s];if(-1!==i.indexOf(a))return"zh-Hans"}return"zh-Hant"}return i[0].substring(0,2)}return"en"}(),v=C(navigator.userAgent),h=(n=v).mac?"Mac OS X":n.windows?"Microsoft Windows":n.windowsphone?"Microsoft Windows Phone":n.linux?"Linux":n.chromeos?"Google Chrome OS":n.android?"Google Android":n.ios?"Apple iOS":n.blackberry?"Blackberry":n.firefoxos?"Mozilla Firefox OS":n.webos?"WebOS":n.tizen?"Tizen":n.sailfish?"Sailfish OS":"Unknown",g=function(e){var i=e.mobile,o=e.tablet;return i?"Mobile":o?"Tablet":"Desktop"}(v),b=document.URL,w=document.referrer.split("/"),k=null,y={},x=["setAppId","sendTrack"];if("undefined"!=typeof appId)i=appId;else for(var S=0;S<_paq.length;S++)if("setAppId"===_paq[S][0]){i=_paq[S][1];break}if(void 0!==w[2]&&""!==w[0]&&(k=w[0]+"//"+w[2]),void 0!==w[2]&&""!==w[0])k=w[0]+"//"+w[2];function _(){this.setAppId=function(e){!function(e){i=e}(e)},this.sendTrack=function(e){}}function z(){a.length?a[0].addTracker():function(){var e=new _;for(a.push(e),_paq=function(e,i){var o,n,t={};for(o=0;o<i.length;o++){var s=i[o];for(t[s]=1,n=0;n<e.length;n++)if(e[n]&&e[n][0]){var r=e[n][0];s===r&&(T(e[n]),delete e[n],t[r],t[r]++)}}return e}(_paq,x),iterator=0;iterator<_paq.length;iterator++)_paq[iterator]&&T(_paq[iterator])}()}function T(){var e,i,o,n,t;for(e=0;e<arguments.length;e+=1){var s,r;if(t=null,arguments[e]&&arguments[e].slice&&(t=arguments[e].slice()),I(o=(n=arguments[e]).shift())&&o.indexOf("::")>0)r=(s=o.split("::"))[0],o=s[1],"object"==typeof mepuzz[r]&&"function"==typeof mepuzz[r][o]?mepuzz[r][o].apply(mepuzz[r],n):t&&c.push(t);else for(i=0;i<a.length;i++)if(I(o)){r=a[i];var d=o.indexOf(".")>0;if(d)if(s=o.split("."),r&&"object"==typeof r[s[0]])r=r[s[0]],o=s[1];else if(t){c.push(t);break}if(r[o])r[o].apply(r,n);else;if("addTracker"===o)break;if("setTrackerUrl"===o||"setAppId"===o)break}else o.apply(a[i],n)}}function I(e){return"string"==typeof e||e instanceof String}function C(e){var i=!0;function o(i){var o=e.match(i);return o&&o.length>1&&o[1]||""}var n,t=o(/(ipod|iphone|ipad)/i).toLowerCase(),s=!/like android/i.test(e)&&/android/i.test(e),r=/nexus\s*[0-6]\s*/i.test(e),a=!r&&/nexus\s*[0-9]+/i.test(e),c=/CrOS/.test(e),d=/silk/i.test(e),u=/sailfish/i.test(e),l=/tizen/i.test(e),p=/(web|hpw)os/i.test(e),m=/windows phone/i.test(e),f=(/SamsungBrowser/i.test(e),!m&&/windows/i.test(e)),v=!t&&!d&&/macintosh/i.test(e),h=!s&&!u&&!l&&!p&&/linux/i.test(e),g=o(/edge\/(\d+(\.\d+)?)/i),b=o(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(e)&&!/tablet pc/i.test(e),k=!w&&/[^-]mobi/i.test(e),y=/xbox/i.test(e);/opera/i.test(e)?n={name:"Opera",opera:i,version:b||o(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?n={name:"Opera",opera:i,version:o(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:i,version:b||o(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:i,version:b||o(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:i,version:b||o(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:i,version:o(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:i,version:o(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:i,version:o(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:i,version:o(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:i,version:o(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:i,version:o(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(n={name:"Windows Phone",windowsphone:i},g?(n.msedge=i,n.version=g):(n.msie=i,n.version=o(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:i,version:o(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:c?n={name:"Chrome",chromeos:i,chromeBook:i,chrome:i,version:o(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?n={name:"Microsoft Edge",msedge:i,version:g}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:i,version:o(/vivaldi\/(\d+(\.\d+)?)/i)||b}:u?n={name:"Sailfish",sailfish:i,version:o(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:i,version:o(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:i,version:o(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=i)):d?n={name:"Amazon Silk",silk:i,version:o(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:i,version:o(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:i,version:o(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",blackberry:i,version:b||o(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(n={name:"WebOS",webos:i,version:b||o(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=i)):/bada/i.test(e)?n={name:"Bada",bada:i,version:o(/dolfin\/(\d+(\.\d+)?)/i)}:l?n={name:"Tizen",tizen:i,version:o(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:i,version:o(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(e)?n={name:"Chromium",chromium:i,version:o(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:i,version:o(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?n={name:"Android",version:b}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:i},b&&(n.version=b)):t?(n={name:"iphone"==t?"iPhone":"ipad"==t?"iPad":"iPod"},b&&(n.version=b)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:i,version:o(/googlebot\/(\d+(\.\d+))/i)||b}:{name:o(/^(.*)\/(.*) /),version:function(i){var o=e.match(/^(.*)\/(.*) /);return o&&o.length>1&&o[2]||""}()},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=i):(n.name=n.name||"Webkit",n.webkit=i),!n.version&&b&&(n.version=b)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=i,n.version=n.version||o(/gecko\/(\d+(\.\d+)?)/i)),n.windowsphone||n.msedge||!s&&!n.silk?n.windowsphone||n.msedge||!t?v?n.mac=i:y?n.xbox=i:f?n.windows=i:h&&(n.linux=i):(n[t]=i,n.ios=i):n.android=i;var x="";n.windows?x=function(e){switch(o(/Windows ((NT|XP)( \d\d?.\d)?)/i)){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}():n.windowsphone?x=o(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n.mac?x=(x=o(/Mac OS X (\d+([_\.\s]\d+)*)/i)).replace(/[_\s]/g,"."):t?x=(x=o(/os (\d+([_\s]\d+)*) like mac os x/i)).replace(/[_\s]/g,"."):s?x=o(/android[ \/-](\d+(\.\d+)*)/i):n.webos?x=o(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?x=o(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?x=o(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(x=o(/tizen[\/\s](\d+(\.\d+)*)/i)),x&&(n.osversion=x);var S=!n.windows&&x.split(".")[0];return w||a||"ipad"==t||s&&(3==S||S>=4&&!k)||n.silk?n.tablet=i:(k||"iphone"==t||"ipod"==t||s||r||n.blackberry||n.webos||n.bada)&&(n.mobile=i),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=i:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=i:n.x=i,n}function N(){return"object"==typeof _paq&&(void 0!==_paq.length&&!!_paq.length)}function O(){firebase.initializeApp({messagingSenderId:r}),o=firebase.messaging(),"serviceWorker"in navigator&&navigator.serviceWorker.register(s,{scope:"/firebase-cloud-messaging-push-scope"}).then(function(e){o.useServiceWorker(e),e.update(),o.onTokenRefresh(function(){o.getToken().then(function(e){q(!1),A(e),P()}).catch(function(e){})}),P()}).catch(function(e){})}docCookies={getItem:function(e){return e&&this.hasItem(e)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},setItem:function(e,i,o,n,t,s){if(e&&!/^(?:expires|max\-age|path|domain|secure)$/.test(e)){var r="";if(o)switch(typeof o){case"number":r="; max-age="+o;break;case"string":r="; expires="+o;break;case"object":r="; expires="+o.toGMTString()}document.cookie=escape(e)+"="+escape(i)+r+(t?"; domain="+t:"")+(n?"; path="+n:"")+(s?"; secure":"")}},removeItem:function(e){if(e&&this.hasItem(e)){var i=new Date;i.setDate(i.getDate()-1),document.cookie=escape(e)+"=; expires="+i.toGMTString()+"; path=/"}},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}};var A=function(o){"1"!==e.localStorage.getItem("sendToServer")&&(null!==e.sessionStorage.getItem("localtion")?(e.ClientLocation=JSON.parse(e.sessionStorage.getItem("localtion")),j(o,e.ClientLocation)):new Promise(function(e,o){try{fetch("https://mepuzz.com/api/"+i+"/localtion").then(function(e){return f=e.status,e.json()}).then(function(i){e(i)}).catch(function(i){e("")})}catch(i){e("")}}).then(function(i){e.ClientLocation=i,e.sessionStorage.setItem("localtion",JSON.stringify(i)),j(o,i)},function(e){}),q(!0))},q=function(i){e.localStorage.setItem("sendToServer",i?"1":"0")};function P(){o.getToken().then(function(e){e?(e,A(e),N()&&z()):(o.requestPermission().then(function(){P()}).catch(function(e){}),q(!1))}).catch(function(e){q(!1)})}function j(o,n){let t="",r="",a="",c="",l="",f="",w="";if(n)try{void 0!==n.query&&(t=n.query),void 0!==n.city&&(r=n.city),void 0!==n.countryCode&&(a=n.countryCode),void 0!==n.country&&(c=n.country),void 0!==n.lat&&(l=n.lat),void 0!==n.lon&&(f=n.lon),void 0!==n.timezone&&(w=n.timezone)}catch(e){}var x={method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"},cache:"no-cache",mode:"no-cors",body:JSON.stringify({language:m,subscription_id:o,device_os:v.version,browser_name:v.name,browser_version:v.version,operating_system:h,operating_system_version:v.osversion,device_platform:g,device_model:u,ip:t,city:r,country_code:a,country_name:c,latitude:l,longitude:f,time_zone:w,url:encodeURI(b),url_ref:encodeURI(k),utm_source:function(e,i){var o=new RegExp("[\\?&#]"+i+"=([^&#]*)").exec(e);return o?p(o[1]):""}(b,"utm_source"),sdk_version:2})};return fetch(d+i+"/subscribe",x).then(function(e){return e.status}).then(function(i){if(200===i||0===i){let i=y.notif_wellcome?y.notif_wellcome.status:0;if(y&&1===i){let i=y.notif_wellcome.data,o={body:i.body,icon:i.icon,image:i.image,data:{url:i.url,notif_id:0},requireInteraction:!0};Notification.requestPermission(function(n){"granted"===n&&navigator.serviceWorker.register(s,{scope:"/firebase-cloud-messaging-push-scope"}).then(function(n){n.showNotification(i.title,o).onclick=function(o){o.preventDefault(),e.open(i.url,"_blank").focus()}})})}}}).catch(function(e){})}return{publicProperty:"",publicMethod:function(e){},init:function(o){if(N()||appId){!function(e){let o=docCookies.getItem("mepuzzConfig");o?e(JSON.parse(o)):fetch(d+i+"/config").then(function(e){return f=e.status,e.json()}).then(function(i){let o=new Date;o.setTime(o.getTime()+3e5),docCookies.setItem("mepuzzConfig",JSON.stringify(i.payload),o),e(i.payload)}).catch(function(e){})}(function(i){let o=(y=i).app_status,n=y.app_domain,s=e.location.hostname.replace("www.","");var r,a;o&&10===o&&n&&n.indexOf(s)>=0&&(r=O,a=t,function e(){if(a.length){var i=a.shift(),o=document,n=o.createElement("script"),t=o.getElementsByTagName("script")[0];n.type="text/javascript",n.async=!0,n.defer=!0,n.onload=n.onreadystatechange=function(e,i){var o=!1;return function(){o||this.readyState&&"complete"!=this.readyState||(o=!0,i())}}(0,e),n.src=i,t.parentNode.insertBefore(n,t)}else r()}())})}else _paq={push:function(e){"undefined"!==typeof console&&console&&console.error}}}}})().init()}(this);